language: python
env:
    - build_packs="libfreetype6-dev libpng-dev gfortran libblas-dev liblapack-dev mpich2 libmpich2-dev python-pip python-dev" pip_packs="numpy scipy matplotlib nose pyDOE mpi4py" run_tests="nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml"
    #- build_packs="gfortran libblas-dev liblapack-dev mpich2 libmpich2-dev python-dev python-numpy python-scipy python-nose python-pip" pip_packs="matplotlib pyDOE mpi4py" run_tests="nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml"
    #- build_packs="gfortran libblas-dev liblapack-dev python-dev python-numpy python-scipy python-matplotlib python-nose python-pip" pip_packs="pyDOE" run_tests="nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml"
    #- build_packs="gfortran libblas-dev liblapack-dev mpich2 libmpich2-dev python-dev python-numpy python-scipy python-matplotlib python-nose python-pip" pip_packs="pyDOE mpi4py" run_tests="mpirun -n 2 nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml"
python:
    #- "2.6"
    - "2.7"
    #- "3.2"
    #- "3.3"
    #- "3.4"
# command to install dependencies
before_install:
    #- sudo apt-get update
    #- sudo apt-get build-dep python-matplotlib
    - sudo apt-get install -y $build_packs #gfortran libblas-dev liblapack-dev mpich2 libmpich2-dev python-dev python-numpy python-scipy python-matplotlib python-nose python-pip
    - sudo pip install distribute --upgrade
    - sudo pip install  $pip_packs #pyDOE mpi4py

cache:
    - false

# install package:
    - python setup.py install
# script to run before running tests
before_script:
    - mkdir -p shippable/testresults
# command to run tests
script:
    - $run_tests #nosetests --with-xunit --xunit-file=shippable/testresults/nosetests.xml
# notification settings
notifications:
    email:
        recipients:
            - steve.a.mattis@gmail.com
        on_success: change
        on_failure: always
# whitelist
branches:
    only:
        - master
